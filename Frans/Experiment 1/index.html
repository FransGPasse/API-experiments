<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        color: black;
        background-color: rgba(24, 163, 19, 0.363);
        font-size: 60px;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        padding-top: 25rem;
      }

      #attentionBtn {
        background-color: white;
        text-decoration: none;
        font-size: 40px;
        font-family: Verdana;
        font-weight: 300;
        padding: 20px 20px;
        border-radius: 20px;
        outline: none;
        box-shadow: -5px 5px;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
  </head>
  <body>
    <button id="attentionBtn">Click me to get my attention!</button>
    <script>
      if (annyang) {
        //Adds eventlistener to button so the user interacts with the HTML and sound can play (autoplay blocked)
        document
          .getElementById("attentionBtn")
          .addEventListener("click", function () {
            document.getElementById("attentionBtn").innerHTML =
              "I am listening...";
          });

        //Declares variables for sound files
        let sad = [
          "Sad.m4a",
          "Sad 2.m4a",
          "Sad 3.m4a",
          "Sad 4.m4a",
          "Sad 5.m4a",
        ];

        let happy = [
          "Happy.m4a",
          "Happy 2.m4a",
          "Happy 3.m4a",
          "Happy 4.m4a",
          "Happy 5.m4a",
          "Happy 6.m4a",
        ];

        let plsContinue = [
          "Continue.m4a",
          "Continue 2.m4a",
          "Continue 3.m4a",
          "Continue 4.m4a",
          "Continue 5.m4a",
        ];

        let neutral = [
          "Neutral.m4a",
          "Neutral 2.m4a",
          "Neutral 3.m4a",
          "Neutral 4.m4a",
          "Neutral 5.m4a",
          "Neutral 6.m4a",
        ];

        let hello = new Audio("Hello.m4a");

        let goodbye = new Audio("Goodbye.m4a");

        //Listens for words/feelings as tag
        let feelings = function (tag) {
          //Splits based on symbol " " and puts in array, in other words splits the sentence in to seperate words
          let word = tag.split(/\s+/);

          //Console logs the first and last word from in the array
          console.log("First word: " + word[0]);
          console.log("Last word: " + word[word.length - 1]);

          //Listens for if the word in the string is present in the array and plays correlating sounds
          //Also randomizes the array every time and picks a random sound from the variables
          if (word.indexOf("sad") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("mad") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("angry") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("tired") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("hungry") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("bored") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("fucking") > -1) {
            let randomSad = sad[Math.floor(Math.random() * sad.length)];

            let sadFiles = new Audio(randomSad);
            sadFiles.play();
          } else if (word.indexOf("happy") > -1) {
            let randomHappy = happy[Math.floor(Math.random() * happy.length)];

            let happyFiles = new Audio(randomHappy);
            happyFiles.play();
          } else if (word.indexOf("glad") > -1) {
            let randomHappy = happy[Math.floor(Math.random() * happy.length)];

            let happyFiles = new Audio(randomHappy);
            happyFiles.play();
          } else if (word.indexOf("love") > -1) {
            let randomHappy = happy[Math.floor(Math.random() * happy.length)];

            let happyFiles = new Audio(randomHappy);
            happyFiles.play();
          } else if (word.indexOf("excited") > -1) {
            let randomHappy = happy[Math.floor(Math.random() * happy.length)];

            let happyFiles = new Audio(randomHappy);
            happyFiles.play();
          } else if (word.indexOf("hello") > -1) {
            hello.play();
          } else if (word.indexOf("goodbye") > -1) {
            goodbye.play();

            //Listens for the word "know" and plays sounds that helps continue the conversation
          } else if (word.indexOf("know") > -1) {
            let randomContinue =
              plsContinue[Math.floor(Math.random() * plsContinue.length)];

            let continueFiles = new Audio(randomContinue);
            continueFiles.play();
          }
          //Searches if any of the words are present in the array and if not plays a randomized neutral sound
          else {
            let randomNeutral =
              neutral[Math.floor(Math.random() * neutral.length)];

            let neutralFiles = new Audio(randomNeutral);
            neutralFiles.play();
          }
        };

        //Declares variable for the keywords used
        let commands = {
          "*tag": feelings,
        };

        //Prints what the API thinks the user said on to the document
        annyang.addCallback("result", function (phrases) {
          document.body.innerHTML = "I think you said: " + phrases[0];
        });

        //Adds debug console and commands, sets language to English and starts Annyang
        annyang.debug();
        annyang.addCommands(commands);
        annyang.setLanguage("en");
        annyang.start();
      }
    </script>
  </body>
</html>
